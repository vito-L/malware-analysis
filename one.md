# 第一章 恶意代码分析技术入门

### 分析目标

通常是为一起网络入侵事件的响应提供所需信息

恶意代码分析可以用来编写出`基于主机`的和`基于网络`的检测特征码

基于主机的特征码：或称为感染迹象，用于在受感染主机上检测出恶意代码，这些迹象经常是恶意代码所创建或修改的文件，或是它们对注册表的特定修改
基于网络的特征码：通过`监测网络流量`来检测恶意代码。网络特征码可以在没有进行恶意代码分析时创建，但在恶意代码分析帮助下提取的特征码往往是更加有效的，可以提供更高的检测率和更少的误报

### 静态分析技术

基础技术：包括检查可执行文件但不查看具体指令的一些技术
基础技术可以确认一个文件是否是恶意的，提供有关其功能的信息，有时还会提供一些信息让你能够生成简单的网络特征码
高级技术：主要是对恶意代码内部机制的逆向工程，通过将可执行文件装载到反汇编器中，查看程序指令，来发现恶意代码到底做了什么

### 动态分析技术

基础技术：运行恶意代码并观察系统上的行为，以移除感染，产生有效的检测特征码
高级技术：使用调试器来检查一个恶意可执行程序运行时刻的内部状态

### 恶意代码类型

- `后门`：恶意代码将自身安装到一台计算机来允许攻击者访问。后门程序通常让攻击者只需很少认证甚至无须认证，便可以连接到远程计算机上，并可以在本地系统执行命令
- `僵尸网络`：与后门类似，也允许攻击者访问系统。但是所有被同一个僵尸网络感染的计算机将会从一台控制命令服务器接收到相同的命令
- `下载器`：这是一类只是用来下载其他恶意代码的恶意代码。通常是在攻击者获得系统的访问时首先进行安装的。下载器程序会下载和安装其他的恶意代码
- `间谍软件`：这是一类从受害计算机上收集信息并发送给攻击者的恶意代码
- `启动器`：用来启动其他恶意程序的恶意代码。通常情况下，启动器使用一些非传统的技术，来启动其他恶意程序，以确保其隐蔽性，或者以更高权限访问系统
- `内核套件`：设计用来隐藏其他恶意代码的恶意代码。通常是与其他恶意代码（如后门）组合成工具套装，来允许为攻击者提供远程访问，并且使代码很难被受害者发现
- `勒索软件`：设计成吓唬受感染的用户，来勒索他们购买某些东西的恶意代码。这类软件通常有一个用户界面，使得它看起来像是一个杀毒软件或其他安全程序。它会通知用户系统中存在恶意代码，而唯一除掉它们的方法只有购买他们的“软件”，而事实上，他们所卖软件的全部功能只不过是将勒索软件进行移除而已
- `发送垃圾邮件的恶意代码`：这类恶意代码在感染用户计算机之后，便会使用系统与网络资源来发送大量的垃圾邮件。这类恶意代码通过为攻击者出售垃圾邮件发送服务器而获利
- `蠕虫或计算机病毒`：可以自我复制和感染其他计算机的恶意代码

### 恶意代码分析通用规则

1. 不要过于陷入细节
2. 要记住对于不同的工作任务，可以用不同的工具和方法
3. 恶意代码分析就像是猫抓老鼠的游戏
